(function(e){typeof e.fn.each2=="undefined"&&e.fn.extend({each2:function(t){var n=e([0]),r=-1,i=this.length;while(++r<i&&(n.context=n[0]=this[r])&&t.call(n[0],r,n)!==!1);return this}})})(jQuery);(function(e,t){"use strict";function a(e,t){var n=0,r=t.length,i;if(typeof e=="undefined")return-1;if(e.constructor===String){for(;n<r;n+=1)if(e.localeCompare(t[n])===0)return n}else for(;n<r;n+=1){i=t[n];if(i.constructor===String){if(i.localeCompare(e)===0)return n}else if(i===e)return n}return-1}function f(e,n){return e===n?!0:e===t||n===t?!1:e===null||n===null?!1:e.constructor===String?e.localeCompare(n)===0:n.constructor===String?n.localeCompare(e)===0:!1}function l(t,n){var r,i,s;if(t===null||t.length<1)return[];r=t.split(n);for(i=0,s=r.length;i<s;i+=1)r[i]=e.trim(r[i]);return r}function c(e){return e.outerWidth()-e.width()}function h(e){e.bind("keydown",function(){e.data("keyup-change-value",e.val())});e.bind("keyup",function(){e.val()!==e.data("keyup-change-value")&&e.trigger("keyup-change")})}function p(n){n.bind("mousemove",function(n){var r=e(document).data("select2-lastpos");(r===t||r.x!==n.pageX||r.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function d(e,t){var n;return function(){window.clearTimeout(n);n=window.setTimeout(t,e)}}function v(e,t){var n=d(e,function(e){t.trigger("scroll-debounced",e)});t.bind("scroll",function(e){a(e.target,t.get())>=0&&n(e)})}function m(e){e.preventDefault();e.stopPropagation()}function g(t){if(!u){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);u=e("<div></div>").css({position:"absolute",left:"-1000px",top:"-1000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"});e("body").append(u)}u.text(t.val());return u.width()}function y(e,t,n){var r=e.toUpperCase().indexOf(t.toUpperCase()),i=t.length;if(r<0){n.push(e);return}n.push(e.substring(0,r));n.push("<span class='select2-match'>");n.push(e.substring(r,r+i));n.push("</span>");n.push(e.substring(r+i,e.length))}function b(t){var n,r=0,i=null,s=t.quietMillis||100;return function(o){window.clearTimeout(n);n=window.setTimeout(function(){r+=1;var n=r,s=t.data,u=t.transport||e.ajax,a=t.type||"GET";s=s.call(this,o.term,o.page,o.context);null!==i&&i.abort();i=u.call(null,{url:t.url,dataType:t.dataType,data:s,type:a,success:function(e){if(n<r)return;var i=t.results(e,o.page);o.callback(i)}})},s)}}function w(t){var n=t,r,i=function(e){return""+e.text};if(!e.isArray(n)){i=n.text;if(!e.isFunction(i)){r=n.text;i=function(e){return e[r]}}n=n.results}return function(t){var r=t.term,s={};if(r===""){t.callback({results:n});return}s.results=e(n).filter(function(){return t.matcher(r,i(this))}).get();t.callback(s)}}function E(n){return e.isFunction(n)?n:function(r){var i=r.term,s={results:[]};e(n).each(function(){var e=this.text!==t,n=e?this.text:this;(i===""||r.matcher(i,n))&&s.results.push(e?this:{id:this,text:this})});r.callback(s)}}function S(t){return e.isFunction(t)?t():t}function x(t,n){var r=function(){};r.prototype=new t;r.prototype.constructor=r;r.prototype.parent=t.prototype;r.prototype=e.extend(r.prototype,n);return r}if(window.Select2!==t)return;var n,r,i,s,o,u;n={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:return!0}return!1},isControl:function(e){e=e.which?e.which:e;switch(e){case n.SHIFT:case n.CTRL:case n.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){e=e.which?e.which:e;return e>=112&&e<=123}};o=function(){var e=1;return function(){return e++}}();e(document).delegate("*","mousemove",function(t){e(document).data("select2-lastpos",{x:t.pageX,y:t.pageY})});e(document).ready(function(){e(document).delegate("*","mousedown focusin touchend",function(t){var n=e(t.target).closest("div.select2-container").get(0);if(n)e(document).find("div.select2-container-active").each(function(){this!==n&&e(this).data("select2").blur()});else{n=e(t.target).closest("div.select2-drop").get(0);e(document).find("div.select2-drop-active").each(function(){this!==n&&e(this).data("select2").blur()})}})});r=x(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var r,i,s=".select2-results";this.opts=n=this.prepareOpts(n);this.id=n.id;n.element.data("select2")!==t&&n.element.data("select2")!==null&&this.destroy();this.enabled=!0;this.container=this.createContainer();this.body=n.element.closest("body");n.element.attr("class")!==t&&this.container.addClass(n.element.attr("class"));this.container.css(S(n.containerCss));this.container.addClass(S(n.containerCssClass));this.opts.element.data("select2",this).hide().after(this.container);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");this.dropdown.css(S(n.dropdownCss));this.dropdown.addClass(S(n.dropdownCssClass));this.dropdown.data("select2",this);this.results=r=this.container.find(s);this.search=i=this.container.find("input.select2-input");this.resultsPage=0;this.context=null;this.initContainer();p(this.results);this.dropdown.delegate(s,"mousemove-filtered",this.bind(this.highlightUnderEvent));v(80,this.results);this.dropdown.delegate(s,"scroll-debounced",this.bind(this.loadMoreIfNeeded));e.fn.mousewheel&&r.mousewheel(function(e,t,n,i){var s=r.scrollTop(),o;if(i>0&&s-i<=0){r.scrollTop(0);m(e)}else if(i<0&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()){r.scrollTop(r.get(0).scrollHeight-r.height());m(e)}});h(i);i.bind("keyup-change",this.bind(this.updateResults));i.bind("focus",function(){i.addClass("select2-focused")});i.bind("blur",function(){i.removeClass("select2-focused")});this.dropdown.delegate(s,"click",this.bind(function(t){if(e(t.target).closest(".select2-result:not(.select2-disabled)").length>0){this.highlightUnderEvent(t);this.selectHighlighted(t)}else{m(t);this.focusSearch()}}));if(e.isFunction(this.opts.initSelection)){this.initSelection();this.monitorSource()}n.element.is(":disabled")&&this.disable()},destroy:function(){var e=this.opts.element.data("select2");if(e!==t){e.container.remove();e.dropdown.remove();e.opts.element.removeData("select2").unbind(".select2").show()}},prepareOpts:function(n){var r,i,s;r=n.element;r.get(0).tagName.toLowerCase()==="select"&&(this.select=i=n.element);i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")});n=e.extend({},{containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",populateResults:function(r,i,s){var u={},a,f=[],l,c,h,p,d,v=this.opts.id;a=function(e,r){var i,l,c,h,p,m;for(i=0,l=e.length;i<l;i+=1){h=e[i];p=v(h)!==t;m="children"in h&&h.children.length>0;f.push("<li class='select2-result-depth-"+r);p?f.push(" select2-result"):f.push(" select2-result-unselectable");m&&f.push(" select2-result-with-children");f.push("'");if(p){c=o();f.push(" id='select2-result-"+c+"'");u[c]=h}f.push("><div class='select2-result-label'>");d=n.formatResult(h,s,f);d!==t&&f.push(d);f.push("</div>");if(m){f.push("<ul class='select2-result-sub'>");a(h.children,r+1);f.push("</ul>")}f.push("</li>")}};a(i,0);r.append(f.join(""));for(l in u)e("#select2-result-"+l,r).data("select2-data",u[l])},formatResult:function(e,t,n){y(e.text,t.term,n)},formatSelection:function(e){return e.fullText||e.text},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){return"Please enter "+(t-e.length)+" more characters"},formatLoadMore:function(e){return"Loading more results..."},minimumResultsForSearch:0,minimumInputLength:0,id:function(e){return e.id},matcher:function(e,t){return t.toUpperCase().indexOf(e.toUpperCase())>=0}},n);if(typeof n.id!="function"){s=n.id;n.id=function(e){return e[s]}}if(i){n.query=this.bind(function(n){var i={results:[],more:!1},s=n.term,o,u,a;a=function(e,t){var r;if(e.is("option"))n.matcher(s,e.text())&&t.push({id:e.attr("value"),text:e.text(),element:e.get()});else if(e.is("optgroup")){r={text:e.attr("label"),children:[],element:e.get()};e.children().each2(function(e,t){a(t,r.children)});r.children.length>0&&t.push(r)}};o=r.children();if(this.getPlaceholder()!==t&&o.length>0){u=o[0];e(u).text()===""&&(o=o.not(u))}o.each2(function(e,t){a(t,i.results)});n.callback(i)});n.id=function(e){return e.id}}else if(!("query"in n))if("ajax"in n)n.query=b(n.ajax);else if("data"in n)n.query=w(n.data);else if("tags"in n){n.query=E(n.tags);n.createSearchChoice=function(e){return{id:e,text:e}};n.initSelection=function(t,n){var r=[];e(l(t.val(),",")).each(function(){r.push({id:this,text:this})});n(r)}}if(typeof n.query!="function")throw"query function not defined for Select2 "+n.element.attr("id");return n},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(t){t=t||{};t=e.extend({},t,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(t);this.opts.element.data("select2-change-triggered",!1)},enable:function(){if(this.enabled)return;this.enabled=!0;this.container.removeClass("select2-container-disabled")},disable:function(){if(!this.enabled)return;this.close();this.enabled=!1;this.container.addClass("select2-container-disabled")},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e=this.container.offset(),t=this.container.outerHeight(),n=this.container.outerWidth(),r={top:e.top+t,left:e.left,width:n};this.dropdown.css(r)},open:function(){if(this.opened())return;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body);this.dropdown.addClass("select2-drop-active");this.positionDropdown();this.updateResults(!0);this.dropdown.show();this.ensureHighlightVisible();this.focusSearch()},close:function(){if(!this.opened())return;this.dropdown.hide();this.container.removeClass("select2-dropdown-open");this.results.empty();this.clearSearch()},clearSearch:function(){},ensureHighlightVisible:function(){var t=this.results,n,r,i,s,o,u,a;r=this.highlight();if(r<0)return;n=t.find(".select2-result");i=e(n[r]);s=i.offset().top+i.outerHeight();if(r===n.length-1){a=t.find("li.select2-more-results");a.length>0&&(s=a.offset().top+a.outerHeight())}o=t.offset().top+t.outerHeight();s>o&&t.scrollTop(t.scrollTop()+(s-o));u=i.offset().top-t.offset().top;u<0&&t.scrollTop(t.scrollTop()+u)},moveHighlight:function(t){var n=this.results.find(".select2-result"),r=this.highlight();while(r>-1&&r<n.length){r+=t;if(!e(n[r]).hasClass("select2-disabled")){this.highlight(r);break}}},highlight:function(t){var n=this.results.find(".select2-result .select2-result-label");if(arguments.length===0)return a(n.filter(".select2-highlighted")[0],n.get());t>=n.length&&(t=n.length-1);t<0&&(t=0);if(e(n[t]).parent().is(".select2-result-unselectable"))return;n.removeClass("select2-highlighted");e(n[t]).addClass("select2-highlighted");this.ensureHighlightVisible()},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.results.find(".select2-result");this.highlight(r.index(n))}},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n,r=-1,i=this.resultsPage+1,s=this,o=this.search.val(),u=this.context;if(t.length===0)return;n=t.offset().top-e.offset().top-e.height();if(n<=0){t.addClass("select2-active");this.opts.query({term:o,page:i,context:u,matcher:this.opts.matcher,callback:this.bind(function(n){s.opts.populateResults.call(this,e,n.results,{term:o,page:i,context:u});if(n.more===!0){t.detach().appendTo(e.children(":last")).text(s.opts.formatLoadMore(i+1));window.setTimeout(function(){s.loadMoreIfNeeded()},10)}else t.remove();s.resultsPage=i})})}},updateResults:function(n){function u(){i.scrollTop(0);r.removeClass("select2-active")}function a(e){i.html(e);u()}var r=this.search,i=this.results,s=this.opts,o=this;if(n!==!0&&this.showSearchInput===!1)return;r.addClass("select2-active");if(r.val().length<s.minimumInputLength){a("<li class='select2-no-results'>"+s.formatInputTooShort(r.val(),s.minimumInputLength)+"</li>");return}this.resultsPage=1;s.query({term:r.val(),page:this.resultsPage,context:null,matcher:s.matcher,callback:this.bind(function(l){var c;this.context=l.context===t?null:l.context;if(this.opts.createSearchChoice&&r.val()!==""){c=this.opts.createSearchChoice.call(null,r.val(),l.results);c!==t&&c!==null&&o.id(c)!==t&&o.id(c)!==null&&e(l.results).filter(function(){return f(o.id(this),o.id(c))}).length===0&&l.results.unshift(c)}if(l.results.length===0){a("<li class='select2-no-results'>"+s.formatNoMatches(r.val())+"</li>");return}i.empty();o.opts.populateResults.call(this,i,l.results,{term:r.val(),page:this.resultsPage,context:null});u();if(l.more===!0){i.children().filter(":last").append("<li class='select2-more-results'>"+s.formatLoadMore(this.resultsPage)+"</li>");window.setTimeout(function(){o.loadMoreIfNeeded()},10)}this.postprocessResults(l,n)})})},cancel:function(){this.close()},blur:function(){this.close();this.container.removeClass("select2-container-active");this.dropdown.removeClass("select2-drop-active");this.search.is(":focus")&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){window.setTimeout(this.bind(function(){this.search.focus()}),10)},selectHighlighted:function(){var e=this.results.find(".select2-highlighted").not(".select2-disabled").closest(".select2-result").not(".select2-result-unselectable").data("select2-data");e&&this.onSelect(e)},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},getContainerWidth:function(){var e,n,r,i,s;if(this.opts.width!==t)return this.opts.width;e=this.opts.element.attr("style");if(e!==t){n=e.split(";");for(i=0,s=n.length;i<s;i+=1){r=n[i].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(r!==null&&r.length>=1)return r[1]}}return this.opts.element.width()+"px"}});i=x(r,{createContainer:function(){return e("<div></div>",{"class":"select2-container",style:"width: "+this.getContainerWidth()}).html(["    <a href='javascript:void(0)' class='select2-choice'><input type='text' class='select2-offscreen select2-focusser'/>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop' style='display:none;'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},open:function(){if(this.opened())return;this.parent.open.apply(this,arguments)},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close();this.selection.focus()},isFocused:function(){return this.selection.is(":focus")},cancel:function(){this.parent.cancel.apply(this,arguments);this.selection.focus()},initContainer:function(){var t,r=this.container,i=this.dropdown,s=e([this.container.get(0),this.dropdown.get(0)]),o=!1,u=".select2-choice",a=r.find("input.select2-focusser");this.selection=t=r.find(u);this.search.bind("keydown",this.bind(function(e){switch(e.which){case n.UP:case n.DOWN:this.moveHighlight(e.which===n.UP?-1:1);m(e);return;case n.TAB:case n.ENTER:this.selectHighlighted();m(e);return;case n.ESC:this.cancel(e);m(e);return}}));s.delegate(u,"click",this.bind(function(e){o=!0;if(this.opened()){this.close();t.focus()}else this.enabled&&this.open();e.preventDefault();o=!1}));s.delegate(u,"keydown",this.bind(function(e){if(!this.enabled||e.which===n.TAB||n.isControl(e)||n.isFunctionKey(e)||e.which===n.ESC)return;this.open();(e.which===n.PAGE_UP||e.which===n.PAGE_DOWN||e.which===n.SPACE)&&m(e);e.which===n.ENTER&&m(e)}));s.delegate(u,"focus",function(){if(this.enabled){s.addClass("select2-container-active");i.addClass("select2-drop-active")}});s.delegate(u,"blur",this.bind(function(e){if(o)return;if(e.target===a.get(0))return;this.opened()||this.blur()}));t.delegate("abbr","click",this.bind(function(e){if(!this.enabled)return;this.clear();m(e);this.close();this.triggerChange();t.focus()}));this.setPlaceholder();a.bind("focus",function(){t.focus()});t.bind("focus",this.bind(function(){a.hide();this.container.addClass("select2-container-active")}));t.bind("blur",function(){a.show()});this.opts.element.bind("open",function(){a.hide()})},clear:function(){this.opts.element.val("");this.selection.find("span").empty();this.selection.removeData("select2-data");this.setPlaceholder()},initSelection:function(){var e;if(this.opts.element.val()===""){this.updateSelection({id:"",text:""});this.close();this.setPlaceholder()}else{var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){if(e!==t&&e!==null){n.updateSelection(e);n.close();n.setPlaceholder()}})}},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);t.element.get(0).tagName.toLowerCase()==="select"&&(t.initSelection=function(t,n){var r=t.find(":selected");e.isFunction(n)&&n({id:r.attr("value"),text:r.text()})});return t},setPlaceholder:function(){var e=this.getPlaceholder();if(this.opts.element.val()===""&&e!==t){if(this.select&&this.select.find("option:first").text()!=="")return;typeof e=="object"?this.updateSelection(e):this.selection.find("span").html(e);this.selection.addClass("select2-default");this.selection.find("abbr").hide()}},postprocessResults:function(t,n){var r=0,i=this,s=!0;this.results.find(".select2-result").each2(function(e,t){if(f(i.id(t.data("select2-data")),i.opts.element.val())){r=e;return!1}});this.highlight(r);if(n===!0){s=this.showSearchInput=t.results.length>=this.opts.minimumResultsForSearch;this.dropdown.find(".select2-search")[s?"removeClass":"addClass"]("select2-search-hidden");e(this.dropdown,this.container)[s?"addClass":"removeClass"]("select2-with-searchbox")}},onSelect:function(e){var t=this.opts.element.val();this.opts.element.val(this.id(e));this.updateSelection(e);this.close();this.selection.focus();f(t,this.id(e))||this.triggerChange()},updateSelection:function(e){this.selection.data("select2-data",e);this.selection.find("span").html(this.opts.formatSelection(e));this.selection.removeClass("select2-default");this.opts.allowClear&&this.getPlaceholder()!==t&&this.selection.find("abbr").show()},val:function(){var e,t=null;if(arguments.length===0)return this.opts.element.val();e=arguments[0];if(this.select){this.select.val(e).find(":selected").each2(function(e,n){t={id:n.attr("value"),text:n.text()};return!1});this.updateSelection(t)}else{this.opts.element.val(e?this.id(e):"");this.updateSelection(e)}this.setPlaceholder()},clearSearch:function(){this.search.val("")},data:function(e){if(arguments.length===0)return this.selection.data("select2-data");if(!e||e==="")this.clear();else{this.opts.element.val(e?this.id(e):"");this.updateSelection(e)}}});s=x(r,{createContainer:function(){return e("<div></div>",{"class":"select2-container select2-container-multi",style:"width: "+this.getContainerWidth()}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' style='width: 25px;' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""))},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments);t=e.extend({},{closeOnSelect:!0},t);t.element.get(0).tagName.toLowerCase()==="select"&&(t.initSelection=function(t,n){var r=[];t.find(":selected").each2(function(e,t){r.push({id:t.attr("value"),text:t.text()})});e.isFunction(n)&&n(r)});return t},initContainer:function(){var e=".select2-choices",t;this.searchContainer=this.container.find(".select2-search-field");this.selection=t=this.container.find(e);this.search.bind("keydown",this.bind(function(e){if(!this.enabled)return;if(e.which===n.BACKSPACE&&this.search.val()===""){this.close();var r,i=t.find(".select2-search-choice-focus");if(i.length>0){this.unselect(i.first());this.search.width(10);m(e);return}r=t.find(".select2-search-choice");r.length>0&&r.last().addClass("select2-search-choice-focus")}else t.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(e.which){case n.UP:case n.DOWN:this.moveHighlight(e.which===n.UP?-1:1);m(e);return;case n.ENTER:case n.TAB:this.selectHighlighted();m(e);return;case n.ESC:this.cancel(e);m(e);return}if(e.which===n.TAB||n.isControl(e)||n.isFunctionKey(e)||e.which===n.BACKSPACE||e.which===n.ESC)return;this.open();(e.which===n.PAGE_UP||e.which===n.PAGE_DOWN)&&m(e)}));this.search.bind("keyup",this.bind(this.resizeSearch));this.container.delegate(e,"click",this.bind(function(e){if(!this.enabled)return;this.open();this.focusSearch();e.preventDefault()}));this.container.delegate(e,"focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active");this.clearPlaceholder()}));this.clearSearch()},enable:function(){if(this.enabled)return;this.parent.enable.apply(this,arguments);this.search.show()},disable:function(){if(!this.enabled)return;this.parent.disable.apply(this,arguments);this.search.hide()},initSelection:function(){var e;if(this.opts.element.val()===""){this.updateSelection([]);this.close();this.clearSearch()}if(this.select||this.opts.element.val()!==""){var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){if(e!==t&&e!==null){n.updateSelection(e);n.close();n.clearSearch()}})}},clearSearch:function(){var e=this.getPlaceholder();if(e!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1){this.search.val(e).addClass("select2-default");this.search.width(this.getContainerWidth())}else this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},open:function(){if(this.opened())return;this.parent.open.apply(this,arguments);this.clearPlaceholder();this.resizeSearch();this.focusSearch()},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],i=this;e(t).each(function(){if(a(i.id(this),n)<0){n.push(i.id(this));r.push(this)}});t=r;this.selection.find(".select2-search-choice").remove();e(t).each(function(){i.addSelectedChoice(this)});i.postprocessResults()},onSelect:function(e){this.addSelectedChoice(e);this.select&&this.postprocessResults();if(this.opts.closeOnSelect){this.close();this.search.width(10)}else{this.search.width(10);this.resizeSearch()}this.triggerChange({added:e});this.focusSearch()},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(t){var n,r=this.id(t),i,s=this.getVal();i=["<li class='select2-search-choice'>",this.opts.formatSelection(t),"<a href='javascript:void(0)' class='select2-search-choice-close' tabindex='-1'></a>","</li>"];n=e(i.join(""));n.find("a").bind("click dblclick",this.bind(function(t){if(!this.enabled)return;this.unselect(e(t.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");m(t);this.close();this.focusSearch()})).bind("focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active");this.dropdown.addClass("select2-drop-active")}));n.data("select2-data",t);n.insertBefore(this.searchContainer);s.push(r);this.setVal(s)},unselect:function(e){var t=this.getVal(),n,r;e=e.closest(".select2-search-choice");if(e.length===0)throw"Invalid argument: "+e+". Must be .select2-search-choice";n=e.data("select2-data");r=a(this.id(n),t);if(r>=0){t.splice(r,1);this.setVal(t);this.select&&this.postprocessResults()}e.remove();this.triggerChange({removed:n})},postprocessResults:function(){var e=this.getVal(),t=this.results.find(".select2-result"),n=this;t.each2(function(t,r){var i=n.id(r.data("select2-data"));a(i,e)>=0?r.addClass("select2-disabled"):r.removeClass("select2-disabled")});t.each2(function(e,t){if(!t.hasClass("select2-disabled")){n.highlight(e);return!1}})},resizeSearch:function(){var e,t,n,r,i,s=c(this.search);e=g(this.search)+10;t=this.search.offset().left;n=this.selection.width();r=this.selection.offset().left;i=n-(t-r)-s;i<e&&(i=n-s);i<40&&(i=n-s);this.search.width(i)},getVal:function(){var e;if(this.select){e=this.select.val();return e===null?[]:e}e=this.opts.element.val();return l(e,",")},setVal:function(t){var n;if(this.select)this.select.val(t);else{n=[];e(t).each(function(){a(this,n)<0&&n.push(this)});this.opts.element.val(n.length===0?"":n.join(","))}},val:function(){var t,n=[],r=this;if(arguments.length===0)return this.getVal();t=arguments[0];if(this.select){this.setVal(t);this.select.find(":selected").each(function(){n.push({id:e(this).attr("value"),text:e(this).text()})});this.updateSelection(n)}else{t=t===null?[]:t;e(t).each(function(){n.push(r.id(this))});this.setVal(n);this.updateSelection(t)}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))});this.setVal(t);this.triggerChange()},data:function(t){var n=this,r;if(arguments.length===0)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();r=e.map(t,function(e){return n.opts.id(e)});this.setVal(r);this.updateSelection(t)}});e.fn.select2=function(){var n=Array.prototype.slice.call(arguments,0),r,o,u,f,l=["val","destroy","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];this.each(function(){if(n.length===0||typeof n[0]=="object"){r=n.length===0?{}:e.extend({},n[0]);r.element=e(this);if(r.element.get(0).tagName.toLowerCase()==="select")f=r.element.attr("multiple");else{f=r.multiple||!1;"tags"in r&&(r.multiple=f=!0)}o=f?new s:new i;o.init(r)}else{if(typeof n[0]!="string")throw"Invalid arguments to select2 plugin: "+n;if(a(n[0],l)<0)throw"Unknown method: "+n[0];u=t;o=e(this).data("select2");if(o===t)return;n[0]==="container"?u=o.container:u=o[n[0]].apply(o,n.slice(1));if(u!==t)return!1}});return u===t?this:u};window.Select2={query:{ajax:b,local:w,tags:E},util:{debounce:d,markMatch:y},"class":{"abstract":r,single:i,multi:s}}})(jQuery);